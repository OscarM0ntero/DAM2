// Hecho por Oscar Montero	21/10/2024
package multihilo;

public class Main {
    private static int contador = 0;

    public static void main(String[] args) {
        // Ejecutar la simulación 10 veces
        for (int i = 0; i < 10; i++) {
            contador = 0; // Reiniciar el contador en cada iteración

            // Crear los hilos
            Thread hilo1 = new Thread(new Incrementador(1));
            Thread hilo2 = new Thread(new Incrementador(3));
            Thread hilo3 = new Thread(new Incrementador(5));

            // Iniciar los hilos
            hilo1.start();
            hilo2.start();
            hilo3.start();

            // Esperar a que los hilos terminen
            try {
                hilo1.join();
                hilo2.join();
                hilo3.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            // Mostrar el resultado final
            int valorEsperado = 1 + 3 + 5;
            System.out.println("Valor final del contador: " + contador);
            System.out.println("Valor esperado del contador: " + valorEsperado);
            if (contador != valorEsperado) {
                System.out.println("¡Inconsistencia detectada!");
            }
            System.out.println("-----------------------------------");
        }
    }

    static class Incrementador implements Runnable {
        private final int incremento;

        public Incrementador(int incremento) {
            this.incremento = incremento;
        }

        @Override
        public void run() {
            for (int i = 0; i < 10; i++) {
                int anterior = contador;
                contador += incremento;
                System.out.println("Hilo incremento " + incremento + " incrementado por: " + incremento);
            }
        }
    }
}
